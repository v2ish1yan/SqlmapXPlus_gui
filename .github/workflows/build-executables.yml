name:  Build  and  Release

on:
    release:
      create:  true

jobs:
    build-windows:
      runs-on:  windows-latest
      steps:
        -  uses:  actions/checkout@v2
        -  name:  Set  up  Python  3.8.8
          uses:  actions/setup-python@v2
          with:
            python-version:  3.8.8
        -  name:  Install  PyInstaller
          run:  pip  install  pyinstaller
        -  name:  Build  Executable  for  Windows
          run:  pyinstaller  --onefile  main.py
        -  name:  Create  Release
          id:  create_release
          uses:  actions/create-release@v1
          env:
            GITHUB_TOKEN:  ${{  secrets.GITHUB_TOKEN  }}
          with:
            tag_name:  ${{  github.ref  }}
            release_name:  Release  ${{  github.ref  }}
            draft:  false
            prerelease:  false
        -  name:  Upload  Release  Asset  for  Windows
          uses:  actions/upload-release-asset@v1
          env:
            GITHUB_TOKEN:  ${{  secrets.GITHUB_TOKEN  }}
          with:
            upload_url:  ${{  steps.create_release.outputs.upload_url  }}
            asset_path:  ./dist/main.exe
            asset_name:  main.exe
            asset_content_type:  application/octet-stream

